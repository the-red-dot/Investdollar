<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מחשבון השקעה בדולר - צ'יינג' מול בנק</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts (Rubik) -->
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Rubik', sans-serif;
            background-color: #f8fafc;
        }
        .slider-thumb::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #3b82f6;
            cursor: pointer;
            border-radius: 50%;
        }
    </style>
</head>
<body class="text-slate-800">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const App = () => {
            // --- State Variables ---
            const [amount, setAmount] = useState(10000);
            const [targetRate, setTargetRate] = useState(3.40);
            
            // --- Constants (Assumptions) ---
            const currentRate = 3.09;
            const inflationRate = 3.0; // 3% annual inflation
            const fundAnnualInterest = 3.5; // 3.5% annual interest in fund
            const changeSpreadBuy = 0.04; // Change takes ~4 agorot above rate
            const changeSpreadSell = 0.03; // Change takes ~3 agorot below rate
            const taxRate = 0.25; // 25% tax on real profit

            // --- Calculations ---

            // 1. CASH (CHANGE) SCENARIO
            const cashBuyRate = currentRate + changeSpreadBuy;
            const dollarsBought = amount / cashBuyRate;
            const cashSellRate = targetRate - changeSpreadSell; 
            const cashFinalShekel = dollarsBought * cashSellRate;
            const cashNetProfit = cashFinalShekel - amount;
            const cashPercentReturn = (cashNetProfit / amount) * 100;

            // 2. FUND (BANK) SCENARIO
            // In fund, you buy at representative rate (effectively) + management fees are netted from yield usually
            // We assume 0 commission for buy/sell in Israeli mutual funds
            const dollarAppreciation = (targetRate - currentRate) / currentRate;
            const totalNominalYield = dollarAppreciation + (fundAnnualInterest / 100);
            const fundGrossFinal = amount * (1 + totalNominalYield);
            const fundNominalProfit = fundGrossFinal - amount;
            
            // Tax Calculation (Real Profit)
            const inflationDeduction = amount * (inflationRate / 100);
            const realProfit = fundNominalProfit - inflationDeduction;
            const taxToPay = realProfit > 0 ? realProfit * taxRate : 0;
            
            const fundFinalShekel = fundGrossFinal - taxToPay;
            const fundNetProfit = fundFinalShekel - amount;
            const fundPercentReturn = (fundNetProfit / amount) * 100;

            // Helper for formatting
            const formatNIS = (num) => new Intl.NumberFormat('he-IL', { style: 'currency', currency: 'ILS', maximumFractionDigits: 0 }).format(num);
            const formatUSD = (num) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(num);

            return (
                <div className="min-h-screen p-4 md:p-8 max-w-4xl mx-auto">
                    
                    {/* Header */}
                    <header className="text-center mb-8">
                        <div className="inline-flex items-center justify-center p-3 bg-blue-100 rounded-full mb-4">
                            <i data-lucide="trending-up" className="w-8 h-8 text-blue-600"></i>
                        </div>
                        <h1 className="text-3xl md:text-4xl font-bold text-slate-900 mb-2">מחשבון השקעה בדולר</h1>
                        <p className="text-slate-500 text-lg">בדיקה בזמן אמת: האם כדאי לקנות מזומן או קרן כספית?</p>
                    </header>

                    {/* Inputs Section */}
                    <div className="bg-white rounded-2xl shadow-lg p-6 mb-8 border border-slate-100">
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                            
                            {/* Investment Amount Input */}
                            <div>
                                <label className="block text-sm font-medium text-slate-500 mb-2">סכום להשקעה (בשקלים)</label>
                                <div className="relative">
                                    <input 
                                        type="number" 
                                        value={amount}
                                        onChange={(e) => setAmount(Number(e.target.value))}
                                        className="w-full text-2xl font-bold p-4 bg-slate-50 rounded-xl border-2 border-slate-200 focus:border-blue-500 focus:outline-none transition-colors text-center"
                                    />
                                    <span className="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold">₪</span>
                                </div>
                            </div>

                            {/* Target Rate Input */}
                            <div>
                                <div className="flex justify-between mb-2">
                                    <label className="text-sm font-medium text-slate-500">צפי שער דולר בעתיד</label>
                                    <span className="text-sm font-bold text-blue-600">{targetRate.toFixed(2)} ₪</span>
                                </div>
                                <input 
                                    type="range" 
                                    min="2.80" 
                                    max="4.00" 
                                    step="0.01" 
                                    value={targetRate}
                                    onChange={(e) => setTargetRate(Number(e.target.value))}
                                    className="w-full h-3 bg-slate-200 rounded-lg appearance-none cursor-pointer slider-thumb accent-blue-600"
                                />
                                <div className="flex justify-between text-xs text-slate-400 mt-2">
                                    <span>2.80</span>
                                    <span>נוכחי: {currentRate}</span>
                                    <span>4.00</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Results Cards */}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        
                        {/* Option 1: Cash */}
                        <div className="bg-white rounded-2xl shadow-sm border border-red-100 overflow-hidden relative">
                            <div className="h-2 bg-red-400 w-full"></div>
                            <div className="p-6">
                                <div className="flex items-center gap-3 mb-4">
                                    <div className="p-2 bg-red-50 rounded-lg text-red-500">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="20" height="12" x="2" y="6" rx="2"/><circle cx="12" cy="12" r="2"/><path d="M6 12h.01M18 12h.01"/></svg>
                                    </div>
                                    <h3 className="text-xl font-bold text-slate-700">מזומן (צ'יינג')</h3>
                                </div>
                                
                                <div className="mb-6">
                                    <span className="text-slate-400 text-sm">רווח נקי משוער</span>
                                    <div className="text-3xl font-bold text-red-500">
                                        {formatNIS(cashNetProfit)}
                                    </div>
                                    <div className="text-sm font-medium text-red-400 mt-1">
                                        {cashPercentReturn.toFixed(2)}% תשואה
                                    </div>
                                </div>

                                <ul className="space-y-3 text-sm text-slate-600 bg-red-50 p-4 rounded-xl">
                                    <li className="flex justify-between">
                                        <span>עמלת קנייה (מרווח):</span>
                                        <span className="font-bold text-red-600">-{formatNIS(amount - (dollarsBought * currentRate))}</span>
                                    </li>
                                    <li className="flex justify-between">
                                        <span>ריבית שנתית:</span>
                                        <span className="font-bold">0 ₪</span>
                                    </li>
                                    <li className="flex justify-between">
                                        <span>מס למדינה:</span>
                                        <span className="font-bold">0 ₪ (תיאורטי)</span>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        {/* Option 2: Fund (Winner) */}
                        <div className="bg-white rounded-2xl shadow-lg border-2 border-green-500 overflow-hidden relative transform md:-translate-y-2">
                            <div className="absolute top-0 left-0 bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-br-lg">
                                מומלץ
                            </div>
                            <div className="p-6">
                                <div className="flex items-center gap-3 mb-4">
                                    <div className="p-2 bg-green-50 rounded-lg text-green-600">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
                                    </div>
                                    <h3 className="text-xl font-bold text-slate-800">קרן כספית בבנק</h3>
                                </div>
                                
                                <div className="mb-6">
                                    <span className="text-slate-400 text-sm">רווח נקי משוער</span>
                                    <div className="text-4xl font-bold text-green-600">
                                        {formatNIS(fundNetProfit)}
                                    </div>
                                    <div className="text-sm font-medium text-green-500 mt-1">
                                        {fundPercentReturn.toFixed(2)}% תשואה
                                    </div>
                                </div>

                                <ul className="space-y-3 text-sm text-slate-600 bg-green-50 p-4 rounded-xl">
                                    <li className="flex justify-between">
                                        <span>עמלות קנייה:</span>
                                        <span className="font-bold text-green-600">0 ₪</span>
                                    </li>
                                    <li className="flex justify-between">
                                        <span>תוספת ריבית ({fundAnnualInterest}%):</span>
                                        <span className="font-bold text-green-600">+{formatNIS(amount * (fundAnnualInterest/100))}</span>
                                    </li>
                                    <li className="flex justify-between items-center">
                                        <span className="flex items-center gap-1">
                                            מס רווח הון (25% ריאלי)
                                            <div className="group relative">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="text-slate-400 cursor-help"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></svg>
                                                <div className="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-48 p-2 bg-slate-800 text-white text-xs rounded hidden group-hover:block z-10">
                                                    המס משולם רק על הרווח שמעבר לאינפלציה ({inflationRate}%)
                                                </div>
                                            </div>
                                        </span>
                                        <span className="font-bold text-slate-500">-{formatNIS(taxToPay)}</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    {/* Chart Comparison */}
                    <div className="bg-white p-6 rounded-2xl shadow-sm mb-8">
                        <h4 className="font-bold text-slate-700 mb-4">השוואה ויזואלית (נטו בכיס בסוף התקופה)</h4>
                        <div className="space-y-4">
                            {/* Bar 1 */}
                            <div>
                                <div className="flex justify-between text-sm mb-1">
                                    <span>מזומן</span>
                                    <span className="font-bold">{formatNIS(cashFinalShekel)}</span>
                                </div>
                                <div className="w-full bg-slate-100 rounded-full h-4 overflow-hidden">
                                    <div 
                                        className="bg-red-400 h-4 rounded-full transition-all duration-1000" 
                                        style={{ width: `${(cashFinalShekel / (Math.max(cashFinalShekel, fundFinalShekel) * 1.1)) * 100}%` }}
                                    ></div>
                                </div>
                            </div>
                            {/* Bar 2 */}
                            <div>
                                <div className="flex justify-between text-sm mb-1">
                                    <span>קרן כספית</span>
                                    <span className="font-bold text-green-600">{formatNIS(fundFinalShekel)}</span>
                                </div>
                                <div className="w-full bg-slate-100 rounded-full h-4 overflow-hidden">
                                    <div 
                                        className="bg-green-500 h-4 rounded-full transition-all duration-1000" 
                                        style={{ width: `${(fundFinalShekel / (Math.max(cashFinalShekel, fundFinalShekel) * 1.1)) * 100}%` }}
                                    ></div>
                                </div>
                            </div>
                        </div>
                        <div className="mt-4 p-3 bg-blue-50 text-blue-800 text-sm rounded-lg text-center font-medium">
                            ההפרש בכיס לטובת הבנק: {formatNIS(fundFinalShekel - cashFinalShekel)}
                        </div>
                    </div>

                    {/* Action Section */}
                    <div className="bg-slate-800 text-white rounded-2xl p-8 text-center relative overflow-hidden">
                        <div className="relative z-10">
                            <h2 className="text-2xl font-bold mb-4">מוכן להשקיע חכם?</h2>
                            <p className="text-slate-300 mb-6">אין צורך ללכת לצ'יינג'. נכנסים לאפליקציית הבנק וקונים את הקרן ללא עמלות.</p>
                            
                            <div className="inline-flex flex-col items-center bg-slate-700 p-4 rounded-xl border border-slate-600">
                                <span className="text-sm text-slate-400 mb-1">מספר הקרן לחיפוש בבנק (מיטב)</span>
                                <div className="flex items-center gap-3">
                                    <span className="text-3xl font-mono font-bold tracking-wider text-green-400">5100672</span>
                                </div>
                            </div>
                            
                            {/* Copy logic handled by simple text selection for safety in iframe */}
                            <p className="text-xs text-slate-500 mt-4">*הנתונים הם להמחשה בלבד ואינם מהווים ייעוץ השקעות.</p>
                        </div>
                        
                        {/* Decor */}
                        <div className="absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-blue-600 rounded-full opacity-20 blur-3xl"></div>
                        <div className="absolute bottom-0 left-0 -mb-10 -ml-10 w-40 h-40 bg-green-600 rounded-full opacity-20 blur-3xl"></div>
                    </div>

                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
        
        // Initialize Lucide icons
        lucide.createIcons();
    </script>
</body>
</html>
